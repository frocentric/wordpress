!function(e,t,r,i,s,n,a){e.extend(tribe_ev.fn,{set_form:function(t){var r=!1,s=e("body"),n=e(document.getElementById("tribe_events_filters_form")),a=e(document.getElementById("tribe-bar-form"));s.addClass("tribe-reset-on"),n.length&&(n.tribe_clear_form(),n.find(".ui-slider").length&&(r=!0,e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.prev(),n=r.slider("option");r.slider("values",0,n.min),r.slider("values",1,n.max),s.text(n.min+" - "+n.max),i.val("")}))),a.length&&a.tribe_clear_form(),t=i.parse_string(t),e.each(t,function(t,r){if("action"!==t){var i,s=decodeURIComponent(t);if(1===r.length)Array.isArray(r)&&(r=r[0]),r=decodeURIComponent(r.replace(/\+/g,"%20")),e('[name="'+s+'"]').is('input[type="text"], input[type="hidden"]')?e('[name="'+s+'"]').val(r):e('[name="'+s+'"][value="'+r+'"]').is(":checkbox, :radio")?e('[name="'+s+'"][value="'+r+'"]').prop("checked",!0):e('[name="'+s+'"]').is("select")&&e('select[name="'+s+'"] option[value="'+r+'"]').attr("selected",!0);else for(var n=0;n<r.length;n++)(i=e('[name="'+s+'"][value="'+r[n]+'"]')).is(":checkbox, :radio")?i.prop("checked",!0):e('select[name="'+s+'"] option[value="'+r[n]+'"]').attr("selected",!0)}}),r&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.val().split("-");if(""!==s[0]){var n=i.prev();r.slider("values",0,s[0]),r.slider("values",1,s[1]),n.text(s[0]+" - "+s[1]),r.slider("refresh")}}),s.removeClass("tribe-reset-on")},update_current_filter:function(t,r){var i=e(t);if(i.closest(".tribe_events_filter_item").removeClass("active"),"slider"!==r){i.closest(".tribe_events_filter_item").find(".tribe-filter-status").text("");var s=i.serialize(),n="",a="";if(r=i.attr("type"),i.data("select2")){var l=i.select2("data");if(!l)return;l.text?i.closest(".tribe_events_filter_item").find(".tribe-filter-status").text(l.text.trim()):Array.isArray(l)&&(n=[],e(l).each(function(){n.push(this.text)}),0<n.length&&(a="",1<n.length&&(a=' <span class="tribe-events-filter-count">+'+(n.length-1)+"</span>"),i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(n[0].trim()).append(a)))}else"checkbox"===r&&(s=[],n=[],i.closest(".tribe_events_filter_item").find("input:checked").each(function(){s.push(e(this).val()),"tribe_featuredevent[]"===e(this).attr("name")?n.push(tribe_filter.featured_active_filter):n.push(e('label[for="'+this.id+'"] span').text())}),n&&(a="",1<n.length&&(a=' <span class="tribe-events-filter-count">+'+(n.length-1)+"</span>"),0<n.length&&i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(n[0]).append(a)))}else{var o=i.slider("values");if(o){var _=tribe_filter.currency_symbol+o[0],c=tribe_filter.currency_symbol+o[1];tribe_filter.reverse_position&&(_=o[0]+tribe_filter.currency_symbol,c=o[1]+tribe_filter.currency_symbol),i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(_+" - "+c)}}},toggle_child_fields:function(t,r){e(".child-"+t).each(function(){r?e(this).slideUp():e(this).slideToggle();var t=i.get_parent_cat_id(this,!1);r&&t&&(e(this).toggleClass("closed"),i.toggle_child_fields(t,r))})},category_update:function(t){var r=e(t),s=r.attr("type"),n="";"tribe_eventcategory[]"===r.attr("name")&&"checkbox"===s&&(n=i.get_parent_cat_id(t,"closest"))&&(r.closest("li").removeClass("closed"),i.toggle_child_cat_fields(n,r.prop("checked")))},toggle_child_cat_fields:function(t,r){e(".child-"+t).each(function(){r?(e(this).slideDown(),e(this).find("input").prop("checked",!0)):e(this).find("input").prop("checked",!1);var t=i.get_parent_cat_id(this,!1);t&&(e(this).removeClass("closed"),i.toggle_child_cat_fields(t,r))})},get_parent_cat_id:function(t,r){var i="";return i="closest"===r?e.grep(e(t).closest("li").attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():"parent"===r?e.grep(e(t).parent().attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():e.grep(e(t).attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join(),i=e.grep(i.split("-"),function(e){return e>0}).join()},filter_section_toggle:function(t){var r=e(".tribe-events-filters-horizontal"),s=e(document.getElementById("tribe-events")),n=!(!s.length||!s.tribe_has_attr("data-hover-filters")||1!==s.data("hover-filters"));if(!r.length||!n){var a=e(t.target).closest(".tribe_events_filter_item"),l=a.attr("id");r.length&&(t.stopPropagation(),e(".tribe_events_filter_item").not(a).addClass("closed")),a.hasClass("closed")?(a.removeClass("closed"),i.a11y_filter_toggle(t,open),tribe_storage&&tribe_storage.setItem(l,"open")):(a.addClass("closed"),i.a11y_filter_toggle(t,closed),tribe_storage&&tribe_storage.setItem(l,"closed"))}},a11y_filter_toggle:function(t,r){var i=e(t.currentTarget)||e(t),s=open===r?"true":"false";i.attr("aria-expanded",s)}}),e(document).ready(function(){e(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var a=e(document.getElementById("tribe_events_filters_form")),l=e(".tribe-events-filters-horizontal"),o=e(document.getElementById("tribe-events")),_=e("body"),c=!(!o.length||!o.tribe_has_attr("data-hover-filters")||1!==o.data("hover-filters")),d=e(document.getElementById("tribe_events_filter_item_eventcategory"));function f(e){(e||"filters"===s.ajax_trigger&&t.v_width<t.mobile_break)&&(_.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),s.ajax_trigger="")}function u(){_.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}if(e("#tribe_events_filter_item_eventcategory").length&&s.category&&(s.filter_cats=!0),tribe_storage){var v=tribe_storage.getItem("tribe_events_filters_wrapper");null==v&&_.is(".tribe-filters-closed")&&(v="closed"),v&&"closed"==v?f(!0):v&&"open"==v&&u(),e(".tribe_events_filter_item").each(function(){var t=e(this),r=t.attr("id"),s=tribe_storage.getItem(r);s&&"closed"==s&&(t.addClass("closed"),i.a11y_filter_toggle(t.find("button"),closed))})}function g(){t.v_width<t.mobile_break&&f(!0)}function p(){"past"===s.view||"list"===s.view||"photo"===s.view||"map"===s.view?(s.paged=1,"past"!==s.view&&"list"!==s.view||s.filter_cats&&(t.cur_url=e(document.getElementById("tribe-events-header")).attr("data-baseurl"))):"month"===s.view?(s.date=e(document.getElementById("tribe-events-header")).attr("data-date"),s.filter_cats?t.cur_url=e(document.getElementById("tribe-events-header")).attr("data-baseurl"):t.cur_url=i.url_path(document.URL)):"week"!==s.view&&"day"!==s.view||(s.date=e(document.getElementById("tribe-events-header")).attr("data-date"))}if(e(document.getElementById("tribe_events_filters_wrapper")).on("click",".tribe-js-filters-reset",function(t){t.preventDefault(),_.addClass("tribe-reset-on"),a.tribe_clear_form(),a.find(".ui-slider").length&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.prev(),n=r.slider("option");r.slider("values",0,n.min),r.slider("values",1,n.max),s.text(n.min+" - "+n.max),i.val("")}),l.length&&e(".tribe_events_filter_item").addClass("closed"),a.find(".tribe-events-filter-select2").each(function(){e(this).find("input.tribe-dropdown").val(null).trigger("change")}),a.find(".tribe_events_filter_item.active").each(function(){e(this).removeClass("active")}),a.find(".tribe-filter-status").each(function(){e(this).text("")}),a.submit(),_.removeClass("tribe-reset-on")}).on("click",".tribe-js-filters-toggle",function(e){e.preventDefault(),_.is(".tribe-filters-closed")?u():f(!0)}),_.on("click",function(){l.length&&!c&&e(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group",function(e){l.length&&!c&&e.stopPropagation()}),c&&a.on("mouseover",".tribe_events_filter_item",function(){l.length&&e(this).removeClass("closed")}).on("mouseout",".tribe_events_filter_item",function(){l.length&&e(".tribe_events_filter_item").addClass("closed")}),a.on("click",".tribe-events-filters-group-heading",i.filter_section_toggle),e("form .tribe-events-filters-group-heading").keypress(function(e){13===e.which&&(e.preventDefault(),i.filter_section_toggle(e))}),g(),e(r).on("ajax-success.tribe",function(){f(!1)}).on("resize-complete.tribe",g),a.on("submit",function(t){"change_view"!==tribe_events_bar_action&&(t.preventDefault(),s.popping=!1,p(),i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}))}),n.live_ajax()&&n.pushstate){function b(){i.disable_inputs("#tribe_events_filters_form","input, select"),s.popping=!1,p(),"map"===s.view?n.pushstate?i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}):i.pre_ajax(function(){e(r).trigger("tribe_ev_reloadOldBrowser"),e(r).trigger("reload-old-browser.tribe")}):i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"})}a.find('input[type="submit"]').remove(),e(document.getElementById("tribe_events_filter_item_eventcategory")).length&&s.category&&e("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){i.setup_ajax_timer(function(){b()})})}if(a.on("slidechange",".ui-slider",function(){i.update_current_filter(this,"slider"),n.live_ajax()&&i.setup_ajax_timer(function(){b()})}).on("change","input, select",function(){i.category_update(this),i.update_current_filter(this),s.filter_cats&&"tribe_events_filter_item_eventcategory"===e(this).parents(".tribe_events_filter_item").attr("id")||n.live_ajax()&&i.setup_ajax_timer(function(){b()})}),e(r).on("tribe_ev_collectParams",function(){var e=i.serialize("#tribe_events_filters_form","input, select");e.length?(s.filters=!0,s.params=s.params+"&"+e,"map"!==s.view&&(s.url_params.length?s.url_params=s.url_params+"&"+e:s.url_params=e)):s.filters=!1}),e(r).on("collect-params.tribe",function(){s.filter_cats&&e("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var t=i.serialize("#tribe_events_filters_form","input, select"),r=s.url_params&&"string"==typeof s.url_params?s.url_params.split("&"):[],n=t.split("&").filter(function(e){return-1===r.indexOf(e)}).join("&");s.url_params.length&&n.length?s.url_params=s.url_params+"&"+n:n.length&&(s.url_params=n)}),d.length&&s.category&&(_.addClass("tribe-reset-on"),d.find('option[data-slug="'+s.category+'"]').attr("selected",!0),d.find('input[data-slug="'+s.category+'"]').attr("checked","checked"),_.removeClass("tribe-reset-on")),d.length){var m=[];d.find("input:checked").each(function(){m.push(e(this).val())}),m.length&&d.find("li").each(function(){e(this).removeClass("closed").slideDown()})}e(document).on("click",".tribe-toggle-child",function(t){t.preventDefault();var r=i.get_parent_cat_id(this,"parent");e(this).parent().toggleClass("closed"),i.toggle_child_fields(r,e(this).parent().hasClass("closed"))})})}(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);