!function(e,t,r,i,s,a,n){e.extend(tribe_ev.fn,{set_form:function(t){var r=!1,s=e("body"),a=e(document.getElementById("tribe_events_filters_form")),n=e(document.getElementById("tribe-bar-form"));s.addClass("tribe-reset-on"),a.length&&(a.tribe_clear_form(),a.find(".ui-slider").length&&(r=!0,e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.prev(),a=r.slider("option");r.slider("values",0,a.min),r.slider("values",1,a.max),s.text(a.min+" - "+a.max),i.val("")}))),n.length&&n.tribe_clear_form(),t=i.parse_string(t),e.each(t,function(t,r){if("action"!==t){var i,s=decodeURIComponent(t);if(1===r.length)Array.isArray(r)&&(r=r[0]),r=decodeURIComponent(r.replace(/\+/g,"%20")),e('[name="'+s+'"]').is('input[type="text"], input[type="hidden"]')?e('[name="'+s+'"]').val(r):e('[name="'+s+'"][value="'+r+'"]').is(":checkbox, :radio")?e('[name="'+s+'"][value="'+r+'"]').prop("checked",!0):e('[name="'+s+'"]').is("select")&&e('select[name="'+s+'"] option[value="'+r+'"]').attr("selected",!0);else for(var a=0;a<r.length;a++)(i=e('[name="'+s+'"][value="'+r[a]+'"]')).is(":checkbox, :radio")?i.prop("checked",!0):e('select[name="'+s+'"] option[value="'+r[a]+'"]').attr("selected",!0)}}),r&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.val().split("-");if(""!==s[0]){var a=i.prev();r.slider("values",0,s[0]),r.slider("values",1,s[1]),a.text(s[0]+" - "+s[1]),r.slider("refresh")}}),s.removeClass("tribe-reset-on")},update_current_filter:function(t,r){var i=e(t);if(i.closest(".tribe_events_filter_item").removeClass("active"),"slider"!==r){i.closest(".tribe_events_filter_item").find(".tribe-filter-status").text("");var s=i.serialize(),a="",n="";if(r=i.attr("type"),i.data("select2")){var l=i.select2("data");if(!l)return;l.text?i.closest(".tribe_events_filter_item").find(".tribe-filter-status").text(l.text.trim()):Array.isArray(l)&&(a=[],e(l).each(function(){a.push(this.text)}),0<a.length&&(n="",1<a.length&&(n=' <span class="tribe-events-filter-count">+'+(a.length-1)+"</span>"),i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(a[0].trim()).append(n)))}else"checkbox"===r&&(s=[],a=[],i.closest(".tribe_events_filter_item").find("input:checked").each(function(){s.push(e(this).val()),"tribe_featuredevent[]"===e(this).attr("name")?a.push(tribe_filter.featured_active_filter):a.push(e('label[for="'+this.id+'"] span').text())}),a&&(n="",1<a.length&&(n=' <span class="tribe-events-filter-count">+'+(a.length-1)+"</span>"),0<a.length&&i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(a[0]).append(n)))}else{var o=i.slider("values");if(o){var _=tribe_filter.currency_symbol+o[0],c=tribe_filter.currency_symbol+o[1];tribe_filter.reverse_position&&(_=o[0]+tribe_filter.currency_symbol,c=o[1]+tribe_filter.currency_symbol),i.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(_+" - "+c)}}},toggle_child_fields:function(t,r){e(".child-"+t).each(function(){r?e(this).slideUp():e(this).slideToggle();var t=i.get_parent_cat_id(this,!1);r&&t&&(e(this).toggleClass("closed"),i.toggle_child_fields(t,r))})},category_update:function(t){var r=e(t),s=r.attr("type"),a="";"tribe_eventcategory[]"===r.attr("name")&&"checkbox"===s&&(a=i.get_parent_cat_id(t,"closest"))&&(r.closest("li").removeClass("closed"),i.toggle_child_cat_fields(a,r.prop("checked")))},toggle_child_cat_fields:function(t,r){e(".child-"+t).each(function(){r?(e(this).slideDown(),e(this).find("input").prop("checked",!0)):e(this).find("input").prop("checked",!1);var t=i.get_parent_cat_id(this,!1);t&&(e(this).removeClass("closed"),i.toggle_child_cat_fields(t,r))})},get_parent_cat_id:function(t,r){var i="";return i="closest"===r?e.grep(e(t).closest("li").attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():"parent"===r?e.grep(e(t).parent().attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():e.grep(e(t).attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join(),i=e.grep(i.split("-"),function(e){return e>0}).join()},filter_section_toggle:function(t){var r=e(".tribe-events-filters-horizontal"),s=e(document.getElementById("tribe-events")),a=!(!s.length||!s.tribe_has_attr("data-hover-filters")||1!==s.data("hover-filters"));if(!r.length||!a){var n=e(t.target).closest(".tribe_events_filter_item"),l=n.attr("id");r.length&&(t.stopPropagation(),e(".tribe_events_filter_item").not(n).addClass("closed")),n.hasClass("closed")?(n.removeClass("closed"),i.a11y_filter_toggle(t,open),tribe_storage&&tribe_storage.setItem(l,"open")):(n.addClass("closed"),i.a11y_filter_toggle(t,closed),tribe_storage&&tribe_storage.setItem(l,"closed"))}},a11y_filter_toggle:function(t,r){var i=e(t.currentTarget)||e(t),s=open===r?"true":"false";i.attr("aria-expanded",s)}}),e(function(){if(!e("body").hasClass("single")){e(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var n=e(document.getElementById("tribe_events_filters_form")),l=e(".tribe-events-filters-horizontal"),o=e(document.getElementById("tribe-events")),_=e("body"),c=!(!o.length||!o.tribe_has_attr("data-hover-filters")||1!==o.data("hover-filters")),d=e(document.getElementById("tribe_events_filter_item_eventcategory"));if(e("#tribe_events_filter_item_eventcategory").length&&s.category&&(s.filter_cats=!0),tribe_storage){var f=tribe_storage.getItem("tribe_events_filters_wrapper");null==f&&_.is(".tribe-filters-closed")&&(f="closed"),f&&"closed"==f?g(!0):f&&"open"==f&&p(),e(".tribe_events_filter_item").each(function(){var t=e(this),r=t.attr("id"),s=tribe_storage.getItem(r);s&&"closed"==s&&(t.addClass("closed"),i.a11y_filter_toggle(t.find("button"),closed))})}if(e(document.getElementById("tribe_events_filters_wrapper")).on("click",".tribe-js-filters-reset",function(t){t.preventDefault(),_.addClass("tribe-reset-on"),n.tribe_clear_form(),n.find(".ui-slider").length&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),r=e("#"+t),i=r.prev(),s=i.prev(),a=r.slider("option");r.slider("values",0,a.min),r.slider("values",1,a.max),s.text(a.min+" - "+a.max),i.val("")}),l.length&&e(".tribe_events_filter_item").addClass("closed"),n.find(".tribe-events-filter-select2").each(function(){e(this).find("input.tribe-dropdown").val(null).trigger("change")}),n.find(".tribe_events_filter_item.active").each(function(){e(this).removeClass("active")}),n.find(".tribe-filter-status").each(function(){e(this).text("")}),n.submit(),_.removeClass("tribe-reset-on")}).on("click",".tribe-js-filters-toggle",function(e){e.preventDefault(),_.is(".tribe-filters-closed")?p():g(!0)}),_.on("click",function(){l.length&&!c&&e(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group, .select2-search__field",function(e){l.length&&!c&&e.stopPropagation()}),c&&n.on("mouseover",".tribe_events_filter_item",function(){l.length&&e(this).removeClass("closed")}).on("mouseout",".tribe_events_filter_item",function(){l.length&&e(".tribe_events_filter_item").addClass("closed")}),n.on("click",".tribe-events-filters-group-heading",i.filter_section_toggle),e("form .tribe-events-filters-group-heading").keypress(function(e){13===e.which&&(e.preventDefault(),i.filter_section_toggle(e))}),b(),e(r).on("ajax-success.tribe",function(){g(!1)}).on("resize-complete.tribe",b),n.on("submit",function(t){"change_view"!==tribe_events_bar_action&&(t.preventDefault(),s.popping=!1,m(),i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}))}),a.live_ajax()&&a.pushstate){function u(){i.disable_inputs("#tribe_events_filters_form","input, select"),s.popping=!1,m(),"map"===s.view?a.pushstate?i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}):i.pre_ajax(function(){e(r).trigger("tribe_ev_reloadOldBrowser"),e(r).trigger("reload-old-browser.tribe")}):i.pre_ajax(function(){e(r).trigger("tribe_ev_runAjax"),e(r).trigger("run-ajax.tribe"),s.ajax_trigger="filters"})}n.find('input[type="submit"]').remove(),e(document.getElementById("tribe_events_filter_item_eventcategory")).length&&s.category&&e("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){i.setup_ajax_timer(function(){u()})})}if(n.on("slidechange",".ui-slider",function(){i.update_current_filter(this,"slider"),a.live_ajax()&&i.setup_ajax_timer(function(){u()})}).on("change","input, select",function(){i.category_update(this),i.update_current_filter(this),s.filter_cats&&"tribe_events_filter_item_eventcategory"===e(this).parents(".tribe_events_filter_item").attr("id")||a.live_ajax()&&i.setup_ajax_timer(function(){u()})}),e(r).on("tribe_ev_collectParams",function(){var e=i.serialize("#tribe_events_filters_form","input, select");e.length?(s.filters=!0,s.params=s.params+"&"+e,"map"!==s.view&&(s.url_params.length?s.url_params=s.url_params+"&"+e:s.url_params=e)):s.filters=!1}),e(r).on("collect-params.tribe",function(){s.filter_cats&&e("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var t=i.serialize("#tribe_events_filters_form","input, select"),r=s.url_params&&"string"==typeof s.url_params?s.url_params.split("&"):[],a=t.split("&").filter(function(e){return-1===r.indexOf(e)}).join("&");s.url_params.length&&a.length?s.url_params=s.url_params+"&"+a:a.length&&(s.url_params=a)}),d.length&&s.category&&(_.addClass("tribe-reset-on"),d.find('option[data-slug="'+s.category+'"]').attr("selected",!0),d.find('input[data-slug="'+s.category+'"]').attr("checked","checked"),_.removeClass("tribe-reset-on")),d.length){var v=[];d.find("input:checked").each(function(){v.push(e(this).val())}),v.length&&d.find("li").each(function(){e(this).removeClass("closed").slideDown()})}e(document).on("click",".tribe-toggle-child",function(t){t.preventDefault();var r=i.get_parent_cat_id(this,"parent");e(this).parent().toggleClass("closed"),i.toggle_child_fields(r,e(this).parent().hasClass("closed"))})}function g(e){(e||"filters"===s.ajax_trigger&&t.v_width<t.mobile_break)&&(_.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),s.ajax_trigger="")}function p(){_.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function b(){t.v_width<t.mobile_break&&g(!0)}function m(){"past"===s.view||"list"===s.view||"photo"===s.view||"map"===s.view?(s.paged=1,"past"!==s.view&&"list"!==s.view||s.filter_cats&&(t.cur_url=e(document.getElementById("tribe-events-header")).attr("data-baseurl"))):"month"===s.view?(s.date=e(document.getElementById("tribe-events-header")).attr("data-date"),s.filter_cats?t.cur_url=e(document.getElementById("tribe-events-header")).attr("data-baseurl"):t.cur_url=i.url_path(document.URL)):"week"!==s.view&&"day"!==s.view||(s.date=e(document.getElementById("tribe-events-header")).attr("data-date"))}})}(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);