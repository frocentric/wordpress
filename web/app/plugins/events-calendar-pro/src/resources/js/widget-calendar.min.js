jQuery(document).ready(function(i){var a=i(".tribe-mini-calendar-wrapper").parent();function e(){var a=i(".tribe-mini-calendar-wrapper");if(i(".tribe-mini-calendar-wrapper.layout-wide").length&&i(".tribe-mini-calendar-right").length){var e=i(".tribe-mini-calendar-right"),n=a.height(),t=e.outerHeight();(t+=20)>n?a.css("height",t+"px"):a.css("height","auto")}else i(".tribe-mini-calendar-wrapper.layout-wide").length&&a.css("height","auto")}e();var n=new Date,t=n.getDate().toString(),r=(n.getMonth()+1).toString(),l=n.getFullYear().toString()+"-"+(r[1]?r:"0"+r[0])+"-"+(t[1]?t:"0"+t[0]),s=l.slice(0,7);a.on("click",".tribe-mini-calendar-nav-link",function(a){a.preventDefault();var n=i(this),t=n.closest(".tribe-mini-calendar"),r=n.closest(".tribe-mini-calendar-wrapper"),c=n.attr("data-month"),d=c.slice(0,7);s==d&&(c=l);var o={action:"tribe-mini-cal",eventDate:c,count:t.data("count"),tax_query:t.data("tax-query"),nonce:t.data("nonce")};t.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),i.post(TribeMiniCalendar.ajaxurl,o,function(a){if(t.find(".tribe-mini-calendar-list-wrapper").remove(),a.success){var n=i.parseHTML(a.html);t.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),r.replaceWith(n),e()}})}).on("click",".tribe-mini-calendar-day-link",function(a){a.preventDefault();var n,t=i(this),r=t.attr("data-day"),l=t.text(),s=t.closest(".tribe-mini-calendar"),c=s.parent().siblings(".tribe-mini-calendar-list-wrapper");i("h2.tribe-mini-calendar-title").text(i("#tribe-mini-calendar-month-name").val()+" "+l+" Events"),(n=t).closest(".tribe-mini-calendar").find(".tribe-events-thismonth,.tribe-events-othermonth").removeClass("tribe-mini-calendar-today"),n.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today");var d={action:"tribe-mini-cal-day",eventDate:r,count:s.data("count"),tax_query:s.data("tax-query"),nonce:s.data("nonce")};s.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),i.post(TribeMiniCalendar.ajaxurl,d,function(a){if(a.success){var n="";n=i.isFunction(i.fn.parseHTML)?i.parseHTML(a.html):a.html,s.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),c.replaceWith(n),e()}})})});