!function(e,t,r,a,i,s,n,o,p,_){_&&(r().isotope||tec_debug.warn("TEC Debug: vendor isotope was not loaded before its dependent file tribe-photo-view.js")),r(function(){var v=s.get_url_param("tribe_paged"),u=s.get_url_param("tribe_event_display"),b=r("#tribe-events-photo-events");function l(e){r().isotope?(e.isotope({itemSelector:".tribe-events-photo-event",percentPosition:!0,masonry:{columnWidth:".tribe-events-photo-grid-sizer",gutter:".tribe-events-photo-gutter-sizer"}}),e.imagesLoaded().progress(function(){e.isotope("layout")})):r("#tribe-events-photo-events").removeClass("photo-hidden").css("opacity","1")}if(n.view="photo",v&&(n.paged=v),"past"==u&&(n.view="past"),l(b),o.pushstate&&!o.map_view()){var g="action=tribe_photo&tribe_paged="+n.paged;a.params.length&&(g=g+"&"+a.params),n.category&&(g=g+"&tribe_event_category="+n.category),s.is_featured()&&(g+="&featured=1"),r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")&&!1===p.update_urls.shortcode.photo||history.replaceState({tribe_params:g,tribe_url_params:a.params},"",location.href),r(e).on("popstate",function(e){var t=e.originalEvent.state;t&&(n.do_string=!1,n.pushstate=!1,n.popping=!0,n.params=t.tribe_params,n.url_params=t.tribe_url_params,s.pre_ajax(function(){d()}),s.set_form(n.params))})}function c(e){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),n.ajax_running)return;n.paged=1,n.view="photo",n.popping=!1,s.pre_ajax(function(){d()})}}function d(){if(!n.popping){n.ajax_running=!0,n.filter_cats&&(a.cur_url=r("#tribe-events-header").data("baseurl"));var v=r("#tribe-events-list-hash").val();if(n.params={action:"tribe_photo",tribe_paged:n.paged,tribe_event_display:n.view,featured:s.is_featured()},n.url_params={action:"tribe_photo",tribe_paged:n.paged,tribe_event_display:n.view},a.default_permalinks&&(n.url_params.hasOwnProperty("post_type")||(n.url_params.post_type=p.events_post_type),n.url_params.hasOwnProperty("eventDisplay")||(n.url_params.eventDisplay=n.view)),v.length&&(n.params.hash=v),n.category&&(n.params.tribe_event_category=n.category),r(i).trigger("tribe_ev_serializeBar"),r(i).trigger("serialize-bar.tribe"),s.invalid_date_in_params(n.params))return void(n.ajax_running=!1);r("#tribe-events-header").tribe_spin(),r(".photo-loader").show(),r("#tribe-events-photo-events").addClass("photo-hidden"),n.params=r.param(n.params),n.url_params=r.param(n.url_params),r(i).trigger("tribe_ev_collectParams"),r(i).trigger("collect-params.tribe"),n.pushstate=!1,n.do_string=!0}o.pushstate&&!n.filter_cats?(_&&tec_debug.time("Photo View Ajax Timer"),r(i).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_photoView_AjaxStart"),r(i).trigger("ajax-start.tribe").trigger("photo-view-ajax-start.tribe"),r.post(TribePhoto.ajaxurl,n.params,function(e){if(n.initial_load=!1,s.enable_inputs("#tribe_events_filters_form","input, select"),e.success){n.ajax_running=!1,a.ajax_response={total_count:parseInt(e.total_count),view:e.view,max_pages:e.max_pages,tribe_paged:e.tribe_paged,timestamp:(new Date).getTime()},r("#tribe-events-list-hash").val(e.hash);var o=r.parseHTML(e.html);r("#tribe-events-content").replaceWith(o),r("#tribe-events-content").prev("#tribe-events-list-hash").remove(),r(".tribe-events-promo").next(".tribe-events-promo").remove(),0==e.max_pages&&r("#tribe-events-header").hide(),n.page_title=r("#tribe-events-header").data("title"),n.view_title=r("#tribe-events-header").data("viewtitle"),n.page_title&&(t.title=n.page_title),r(".tribe-events-page-title").html(n.view_title);var v=!r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")||!1!==p.update_urls.shortcode.photo;n.do_string&&v&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,a.cur_url+"?"+n.url_params),n.pushstate&&v&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,a.cur_url),l(r("#tribe-events-photo-events")),r(i).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_photoView_AjaxSuccess"),r(i).trigger("ajax-success.tribe").trigger("photo-view-ajax-success.tribe"),_&&tec_debug.timeEnd("Photo View Ajax Timer")}})):n.url_params.length?e.location=a.cur_url+"?"+n.url_params:e.location=a.cur_url}r("#tribe-events").on("click","li.tribe-events-nav-next a",function(e){e.preventDefault(),n.ajax_running||("past"==n.view?"1"==n.paged?n.view="photo":n.paged--:n.paged++,n.popping=!1,s.pre_ajax(function(){d()}))}).on("click","li.tribe-events-nav-previous a",function(e){e.preventDefault(),n.ajax_running||("photo"==n.view?"1"==n.paged?n.view="past":n.paged--:n.paged++,n.popping=!1,s.pre_ajax(function(){d()}))}),(o.no_bar()||o.live_ajax()&&o.pushstate)&&r("#tribe-bar-date").on("changeDate",function(e){o.reset_on()||c(e)}),r(i).on("updating-recurrence.tribe",function(){n.popping=!1}),r("#tribe-bar-form").on("submit",function(e){"change_view"!=tribe_events_bar_action&&c(e)}),s.snap("#tribe-events-content-wrapper","#tribe-events-content-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),r(i).on("run-ajax.tribe",function(){d()}),_&&tec_debug.info("TEC Debug: tribe-events-photo-view.js successfully loaded"),n.view&&_&&tec_debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);