!function(e,t,r,a,i,n,s,o,l,d){r(t).ready(function(){var p=r("body"),u=r("#tribe-bar-date"),b=r("#tribe-events"),c=r("#tribe-events-bar"),_=r("#tribe-events-header"),v=0,g=!1,h=r(".column.tribe-week-grid-hours div:first-child"),m="/";void 0!==l.events_base&&(m=r("#tribe-events-header").data("baseurl")),a.default_permalinks&&(m=m.split("?")[0]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1}),_.length&&(v=_.data("startofweek")),c.addClass("tribe-has-datepicker");var f=_.data("date");"0"!==s.datepicker_format&&(f=tribeDateFormat(f,"tribeQuery")),s.date=f;var y=[0,1,2,3,4,5,6],w=y.indexOf(v);w>-1&&y.splice(w,1);var k="yyyy-mm-dd";if("0"!==s.datepicker_format){k=a.datepicker_formats.main[s.datepicker_format];var x=n.get_url_param("tribe-bar-date");x&&u.val(tribeDateFormat(x,s.datepicker_format))}function j(){var e,t,a=r(".tribe-grid-body .tribe-grid-content-wrap .column > div[id*='tribe-events-event-']"),i=r(".tribe-week-grid-inner-wrap").height(),n=5e3;a.each(function(){var e=r(this),t=e.find("a"),a=e.attr("data-hour"),s=e.attr("data-duration"),o=e.attr("data-min"),l=r('.tribe-week-grid-block[data-hour="'+a+'"]'),d=0;l.get(0)&&(d=l.offset().top-l.parent().offset().top-l.parent().scrollTop()),d=parseInt(Math.round(d))+parseInt(o);var p=parseInt(i)-parseInt(s)-parseInt(d);0>p&&(s=s+p-14);var u,b=t.css("height","auto").height()+5,c=(u=b>s?b:s-16)+16,_={height:u+"px"};d<n&&(n=d,h=e),e.css({height:c+"px",top:d+"px"}),t.css(_).parent().css(_)}),a.length||(h=r(".column.tribe-week-grid-hours div:first-child")),r(".tribe-week-grid-wrapper.tribe-scroller").nanoScroller({paneClass:"scroller-pane",sliderClass:"scroller-slider",contentClass:"scroller-content",iOSNativeScrolling:!0,alwaysVisible:!1,scrollTo:h}),e=r(".tribe-grid-body .tribe-events-mobile-day.column"),t=100/e.length,e.css("width",t+"%"),r(".tribe-grid-header .tribe-grid-content-wrap .column").css("width",t+"%"),r(".tribe-grid-allday .tribe-grid-content-wrap .column").css("width",t+"%"),r("div[id^='tribe-events-event-']").css({visibility:"visible",opacity:"0"}).delay(500).animate({opacity:"1"},{duration:250}),function(e){e.each(function(){var e=r(this),t=e.next(),a={left:"0",width:"65%"},i={right:"0",width:"65%"};if(t.length){var n=t.offset(),s=[n.left,n.left+t.outerWidth()],o=[n.top,n.top+t.outerHeight()],l=e.offset(),d=[l.left,l.left+e.outerWidth()],p=[l.top,l.top+e.outerHeight()];s[0]<d[1]&&s[1]>d[0]&&o[0]<p[1]&&o[1]>p[0]&&(e.is(".overlap-right")?t.css(a).addClass("overlap-left"):e.is(".overlap-left")?t.css(i).addClass("overlap-right"):(e.css(a),t.css(i).addClass("overlap-right")))}})}(a),tribe_ev.fn.equal_height(r(".tribe-grid-header .tribe-grid-content-wrap .column")),tribe_ev.fn.equal_height(r(".tribe-grid-allday .column")),setTimeout(function(){var e=r(".tribe-grid-body").height();r(".tribe-grid-body .tribe-grid-content-wrap .column").height(e)},250)}function D(e,t){var a=r("#tribe-mobile-container"),i=r('.tribe-mobile-day[data-day="'+e+'"]');i.length?i.show():(a.append('<div class="tribe-mobile-day" data-day="'+e+'"></div>'),function(e){var t=r('.tribe-mobile-day[data-day="'+e+'"]'),a=r('.column[title="'+e+'"] .tribe-week-event');a.length&&a.each(function(){var e=r(this);if(e.tribe_has_attr("data-tribejson")){var a=e.data("tribejson");t.append(tribe_tmpl("tribe_tmpl_week_mobile",a))}})}(e)),i.length||(i=r('.tribe-mobile-day[data-day="'+e+'"]')),!i.find("h5").length&&i.find(".tribe-events-mobile").length&&i.prepend('<h5 class="tribe-mobile-day-date">'+t+"</h5>")}function S(){var e=r("#tribe-events-content > .tribe-events-grid");p.is(".tribe-mobile")?function(e){var t=r(".tribe-events-mobile-day");r("#tribe-mobile-container").length||r('<div id="tribe-mobile-container" />').insertAfter(e),e.hide(),t.each(function(){var e=r(this).attr("title");D(e,r('.tribe-grid-content-wrap .column[title="'+e+'"]').find("span").attr("data-full-date"))})}(e):(e.show(),r(".tribe-event-placeholder").each(function(){var e=r(this).attr("data-event-id"),t=parseInt(r("#tribe-events-event-"+e).outerHeight());r(this).height(t)}),function(){for(var e=r(".tribe-grid-allday"),t=e.find(".vevent"),a=parseInt(r(".tribe-grid-content-wrap .column").width())-8,i=1;i<8;i++)t.hasClass("tribe-dayspan"+i)&&e.find(".tribe-dayspan"+i).children("div").css("width",a*i+(4*(2*i-2)+(i-1))+"px")}(),(r(".tribe-week-grid-wrapper .tribe-grid-body .column").length>6?r(".tribe-grid-body .column:eq(5), .tribe-grid-body .column:eq(6), .tribe-grid-body .column:eq(7)"):r(".tribe-grid-body .column:eq(4), .tribe-grid-body .column:eq(5)")).addClass("tribe-events-right"),j())}if(a.datepicker_opts={format:k,weekStart:v,daysOfWeekDisabled:y,autoclose:!0},tribe_ev.fn.ensure_datepicker_i18n(),u.bootstrapDatepicker(a.datepicker_opts).on("changeDate",function(e){if(s.updating_picker)return;let t=s.datepicker_format.toString();s.date=tribeUtils.formatDateWithMoment(e.date,"tribeQuery",t),g=!0,(o.no_bar()||o.live_ajax()&&o.pushstate)&&(o.reset_on()||T(e,s.date))}),S(),r(i).on("resize-complete.tribe",function(){S()}),o.pushstate&&!o.map_view()){var I="action=tribe_week&eventDate="+s.date;a.params.length&&(I=I+"&"+a.params),s.category&&(I=I+"&tribe_event_category="+s.category),n.is_featured()&&(I+="&featured=1"),r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")&&!1===l.update_urls.shortcode.week||history.replaceState({tribe_params:I,tribe_url_params:a.params},"",location.href),r(e).on("popstate",function(e){var t=e.originalEvent.state;t&&(s.do_string=!1,s.pushstate=!1,s.popping=!0,s.params=t.tribe_params,s.url_params=t.tribe_url_params,n.pre_ajax(function(){C()}),n.set_form(s.params))})}function T(e,t){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),s.ajax_running)return;var i=r("#tribe-bar-date");if(s.popping=!1,t)s.date=t,a.cur_url=m+s.date+"/";else if(i.length&&""!==i.val()){let e=s.datepicker_format.toString();"0"!==s.datepicker_format?s.date=tribeUtils.formatDateWithMoment(i.bootstrapDatepicker("getDate"),"tribeQuery",e):s.date=i.val(),a.cur_url=m+s.date+"/"}else g?a.cur_url=m+s.date+"/":(s.date=a.cur_date,a.cur_url=m+a.cur_date+"/");n.pre_ajax(function(){C()})}}function C(){if(!n.invalid_date(s.date)){r("#tribe-events-header");r(".tribe-events-grid").tribe_spin(),s.pushcount=0,s.ajax_running=!0,s.popping||(s.filter_cats&&(a.cur_url=m),s.params={action:"tribe_week",eventDate:s.date,tribe_event_display:s.view,featured:n.is_featured()},s.url_params={},a.default_permalinks&&(s.url_params.hasOwnProperty("eventDate")||(s.url_params.eventDate=s.date),s.url_params.hasOwnProperty("post_type")||(s.url_params.post_type=l.events_post_type),s.url_params.hasOwnProperty("eventDisplay")||(s.url_params.eventDisplay=s.view)),s.url_params.hasOwnProperty("tribe_event_display")||(s.url_params.tribe_event_display=s.view),s.category&&(s.params.tribe_event_category=s.category),r(i).trigger("tribe_ev_serializeBar"),r(i).trigger("serialize-bar.tribe"),s.params=r.param(s.params),s.url_params=r.param(s.url_params),r(i).trigger("tribe_ev_collectParams"),r(i).trigger("collect-params.tribe"),s.pushstate=!0,s.do_string=!1,(0<s.pushcount||s.filters||a.default_permalinks)&&(s.pushstate=!1,s.do_string=!0));var p=!1;o.pushstate?(d&&tec_debug.time("Week View Ajax Timer"),r(i).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_weekView_AjaxStart"),r(i).trigger("ajax-start.tribe").trigger("week-view-ajax-start.tribe"),r.post(TribeWeek.ajaxurl,s.params,function(e){if(s.initial_load=!1,n.enable_inputs("#tribe_events_filters_form","input, select"),e.success){s.ajax_running=!1,a.ajax_response={total_count:"",view:e.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()},a.cur_url=n.get_base_url();var o=r.parseHTML(e.html);r("#tribe-events-content.tribe-events-week-grid").replaceWith(o),S(),r("div[id*='tribe-events-event-']").hide().fadeIn("fast"),s.page_title=r("#tribe-events-header").data("title"),s.view_title=r("#tribe-events-header").data("viewtitle"),s.page_title&&(t.title=s.page_title),r(".tribe-events-page-title").html(s.view_title),(r("#tribe-events.tribe-events-shortcode").length||s.do_string)&&(-1!==a.cur_url.indexOf("?")&&(a.cur_url=a.cur_url.split("?")[0]),a.cur_url=a.cur_url+"?"+s.url_params,p=!0);var u=!r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")||!1!==l.update_urls.shortcode.week;s.do_string&&u&&history.pushState({tribe_url_params:s.url_params,tribe_params:s.params},s.page_title,p?a.cur_url:a.cur_url+"?"+s.url_params),s.pushstate&&u&&history.pushState({tribe_url_params:s.url_params,tribe_params:s.params},s.page_title,p?a.cur_url:a.cur_url+"?"+s.url_params),r(i).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_weekView_AjaxSuccess"),r(i).trigger("ajax-success.tribe").trigger("week-view-ajax-success.tribe"),d&&tec_debug.timeEnd("Week View Ajax Timer")}})):s.url_params.length?e.location=p?a.cur_url:a.cur_url+"?"+s.url_params:e.location=a.cur_url}}b.on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(e){if(e.preventDefault(),!s.ajax_running){var t=r(this).find("a");s.popping=!1,s.date=t.attr("data-week"),n.update_base_url(t.attr("href")),n.update_picker(s.date),n.pre_ajax(function(){C()})}}),r("form#tribe-bar-form").on("submit",function(e){T(e,null)}),n.snap("#tribe-events-content","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),r(i).on("run-ajax.tribe",function(){C()}),r(".tribe-week-event a.url").on("click touchend",function(t){var a=r(this).attr("href");e.location=a}),d&&tec_debug.info("TEC Debug: tribe-events-week.js successfully loaded"),s.view&&d&&tec_debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);